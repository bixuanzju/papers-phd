% generated by Ott 0.28 from: ../../spec/simpl//source.ott ../../spec/simpl//target.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{var} ,\, \ottmv{x} ,\, \ottmv{y} $ &  \\
 $ \ottmv{i} ,\, \ottmv{l} $ &  \\
}}

\newcommand{\ottsexp}{
\ottrulehead{\ottnt{sexp}  ,\ E  ,\ v}{::=}{\ottcom{source expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\top}{}{}{}{\ottcom{top}}\ottprodnewline
\ottprodline{|}{\ottmv{i}}{}{}{}{\ottcom{lit}}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} .\, E }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; E}{}{\ottcom{abstraction}}\ottprodnewline
\ottprodline{|}{E_{{\mathrm{1}}} \, E_{{\mathrm{2}}}}{}{}{}{\ottcom{applications}}\ottprodnewline
\ottprodline{|}{E_{{\mathrm{1}}}  \,,,\,  E_{{\mathrm{2}}}}{}{}{}{\ottcom{merge}}\ottprodnewline
\ottprodline{|}{E  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{annotations}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{=}  E  \ottsym{\}}}{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{E  \ottsym{.}  \ottmv{l}}{}{}{}{\ottcom{projection}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  E  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{\{}  E  \ottsym{\}}} {\textsf{S}}{}{}{}}

\newcommand{\ottstyp}{
\ottrulehead{\ottnt{styp}  ,\ \ottnt{A}  ,\ \ottnt{B}  ,\ C}{::=}{\ottcom{source types}}\ottprodnewline
\ottfirstprodline{|}{\top}{}{}{}{\ottcom{top}}\ottprodnewline
\ottprodline{|}{\mathsf{Nat}}{}{}{}{\ottcom{nat}}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \, \& \,  \ottnt{B}}{}{}{}{\ottcom{intersection}}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \rightarrow  \ottnt{B}}{}{}{}{\ottcom{function}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}}{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{A}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{L}  \rightarrow  \ottnt{A}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{N} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{S} } {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{String} } {\textsf{S}}{}{}{}}

\newcommand{\ottsctx}{
\ottrulehead{\ottnt{sctx}  ,\ \Gamma}{::=}{\ottcom{source typing context}}\ottprodnewline
\ottfirstprodline{|}{ \bullet }{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}}{}{}{}{\ottcom{assumption}}}

\newcommand{\ottst}{
\ottrulehead{\ottnt{st}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{A}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{l}}{}{}{}{}}

\newcommand{\ottls}{
\ottrulehead{\ottnt{ls}  ,\ \mathcal{L}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ls}  \ottsym{,}  \ottnt{A}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{A}  \ottsym{,}  \ottnt{ls}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ls}  \ottsym{,}  \ottsym{\{}  \ottmv{l}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{\}}  \ottsym{,}  \ottnt{ls}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{ls}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottdirflag}{
\ottrulehead{\ottnt{dirflag}}{::=}{\ottcom{checking direction}}\ottprodnewline
\ottfirstprodline{|}{\Rightarrow}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Leftarrow}{}{}{}{}}

\newcommand{\ottC}{
\ottrulehead{\mathcal{C}}{::=}{\ottcom{program context}}\ottprodnewline
\ottfirstprodline{|}{[\cdot]}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} .\, \mathcal{C} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C} \, E}{}{}{}{}\ottprodnewline
\ottprodline{|}{E \, \mathcal{C}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \,,,\,  E}{}{}{}{}\ottprodnewline
\ottprodline{|}{E  \,,,\,  \mathcal{C}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{:}  \ottnt{A}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{=}  \mathcal{C}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{.}  \ottmv{l}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \mathcal{C}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\otttyp}{
\ottrulehead{\ottnt{typ}  ,\ \tau}{::=}{\ottcom{target types}}\ottprodnewline
\ottfirstprodline{|}{\mathsf{Nat}}{}{}{}{\ottcom{nat}}\ottprodnewline
\ottprodline{|}{\langle \rangle}{}{}{}{\ottcom{unit}}\ottprodnewline
\ottprodline{|}{\tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{2}}}}{}{}{}{\ottcom{function types}}\ottprodnewline
\ottprodline{|}{\tau_{{\mathrm{1}}}  \times  \tau_{{\mathrm{2}}}}{}{}{}{\ottcom{product}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau  \ottsym{\}}}{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \tau  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\mbox{$\mid$}}  \ottnt{A}  \ottsym{\mbox{$\mid$}}} {\textsf{S}}{}{}{}}

\newcommand{\ottexp}{
\ottrulehead{\ottnt{exp}  ,\ \ottnt{e}  ,\ \ottnt{v}}{::=}{\ottcom{target expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variables}}\ottprodnewline
\ottprodline{|}{\langle \rangle}{}{}{}{\ottcom{unit}}\ottprodnewline
\ottprodline{|}{\ottmv{i}}{}{}{}{\ottcom{lit}}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} .\, \ottnt{e} }{}{\textsf{bind}\; \ottmv{x}\; \textsf{in}\; \ottnt{e}}{}{\ottcom{abstractions}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{applications}}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \rangle}{}{}{}{\ottcom{pair}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}}}{}{}{}{\ottcom{record}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{.}  \ottmv{l}}{}{}{}{\ottcom{projection}}\ottprodnewline
\ottprodline{|}{\ottnt{c} \, \ottnt{e}}{}{}{}{\ottcom{coApp}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{e}  \ottsym{)}} {\textsf{S}}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{D}  \ottsym{\{}  \ottnt{e}  \ottsym{\}}} {\textsf{S}}{}{}{}}

\newcommand{\ottco}{
\ottrulehead{\ottnt{co}  ,\ \ottnt{c}}{::=}{\ottcom{coercion}}\ottprodnewline
\ottfirstprodline{|}{\mathsf{id}}{}{}{}{\ottcom{id}}\ottprodnewline
\ottprodline{|}{ \ottnt{c_{{\mathrm{1}}}}  \circ  \ottnt{c_{{\mathrm{2}}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathsf{top}}{}{}{}{\ottcom{top}}\ottprodnewline
\ottprodline{|}{\ottnt{c_{{\mathrm{1}}}}  \rightarrow  \ottnt{c_{{\mathrm{2}}}}}{}{}{}{\ottcom{arr}}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{c_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{c_{{\mathrm{2}}}}  \rangle}{}{}{}{\ottcom{pair}}\ottprodnewline
\ottprodline{|}{\pi_1}{}{}{}{\ottcom{proj1}}\ottprodnewline
\ottprodline{|}{\pi_2}{}{}{}{\ottcom{proj2}}\ottprodnewline
\ottprodline{|}{\mathsf{dist}_{\rightarrow}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{dist}_{ \{  \ottmv{l}  \} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{c}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathsf{top}_{\rightarrow}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathsf{top}_{ \{  \ottmv{l}  \} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{c}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottctx}{
\ottrulehead{\ottnt{ctx}  ,\ \Delta}{::=}{\ottcom{target typing context}}\ottprodnewline
\ottfirstprodline{|}{ \bullet }{}{}{}{\ottcom{empty context}}\ottprodnewline
\ottprodline{|}{\Delta  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau}{}{}{}{\ottcom{assumption}}\ottprodnewline
\ottprodline{|}{\ottsym{\mbox{$\mid$}}  \Gamma  \ottsym{\mbox{$\mid$}}} {\textsf{S}}{}{}{}}

\newcommand{\ottcc}{
\ottrulehead{\mathcal{D}}{::=}{\ottcom{target context}}\ottprodnewline
\ottfirstprodline{|}{[\cdot]}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \lambda \ottmv{x} .\, \mathcal{D} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{D} \, \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \mathcal{D}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \mathcal{D}  \ottsym{,}  \ottnt{e}  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{e}  \ottsym{,}  \mathcal{D}  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{c} \, \mathcal{D}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l}  \ottsym{=}  \mathcal{D}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{D}  \ottsym{.}  \ottmv{l}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \mathcal{D}  \ottsym{)}} {\textsf{S}}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottsexp\ottinterrule
\ottstyp\ottinterrule
\ottsctx\ottinterrule
\ottst\ottinterrule
\ottls\ottinterrule
\ottdirflag\ottinterrule
\ottC\ottinterrule
\otttyp\ottinterrule
\ottexp\ottinterrule
\ottco\ottinterrule
\ottctx\ottinterrule
\ottcc\ottafterlastrule
}}

% defnss
% defns JSubtyping
%% defn sub
\newcommand{\ottdruleSXXrefl}[1]{\ottdrule[#1]{%
}{
 \ottnt{A}   \ottsym{<:}   \ottnt{A}  \rulehl{ \rightsquigarrow   \mathsf{id} } }{%
{\ottdrulename{S\_refl}}{}%
}}


\newcommand{\ottdruleSXXtrans}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{A_{{\mathrm{2}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{3}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}} } }%
\ottpremise{ \ottnt{A_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{2}}}} } }%
}{
 \ottnt{A_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{3}}}}  \rulehl{ \rightsquigarrow    \ottnt{c_{{\mathrm{1}}}}  \circ  \ottnt{c_{{\mathrm{2}}}}  } }{%
{\ottdrulename{S\_trans}}{}%
}}


\newcommand{\ottdruleSXXtop}[1]{\ottdrule[#1]{%
}{
 \ottnt{A}   \ottsym{<:}   \top  \rulehl{ \rightsquigarrow   \mathsf{top} } }{%
{\ottdrulename{S\_top}}{}%
}}


\newcommand{\ottdruleSXXtopArr}[1]{\ottdrule[#1]{%
}{
 \top   \ottsym{<:}   \top  \rightarrow  \top  \rulehl{ \rightsquigarrow   \mathsf{top}_{\rightarrow} } }{%
{\ottdrulename{S\_topArr}}{}%
}}


\newcommand{\ottdruleSXXtopRcd}[1]{\ottdrule[#1]{%
}{
 \top   \ottsym{<:}   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \top  \ottsym{\}}  \rulehl{ \rightsquigarrow    \mathsf{top}_{ \{  \ottmv{l}  \} }  } }{%
{\ottdrulename{S\_topRcd}}{}%
}}


\newcommand{\ottdruleSXXarr}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{B_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}} } }%
\ottpremise{ \ottnt{A_{{\mathrm{2}}}}   \ottsym{<:}   \ottnt{B_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{2}}}} } }%
}{
 \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}   \ottsym{<:}   \ottnt{B_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}}  \rightarrow  \ottnt{c_{{\mathrm{2}}}} } }{%
{\ottdrulename{S\_arr}}{}%
}}


\newcommand{\ottdruleSXXand}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{A_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}} } }%
\ottpremise{ \ottnt{A_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{3}}}}  \rulehl{ \rightsquigarrow   \ottnt{c_{{\mathrm{2}}}} } }%
}{
 \ottnt{A_{{\mathrm{1}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{2}}}}  \, \& \,  \ottnt{A_{{\mathrm{3}}}}  \rulehl{ \rightsquigarrow   \langle  \ottnt{c_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{c_{{\mathrm{2}}}}  \rangle } }{%
{\ottdrulename{S\_and}}{}%
}}


\newcommand{\ottdruleSXXandl}[1]{\ottdrule[#1]{%
}{
 \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \pi_1 } }{%
{\ottdrulename{S\_andl}}{}%
}}


\newcommand{\ottdruleSXXandr}[1]{\ottdrule[#1]{%
}{
 \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}   \ottsym{<:}   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \pi_2 } }{%
{\ottdrulename{S\_andr}}{}%
}}


\newcommand{\ottdruleSXXdistArr}[1]{\ottdrule[#1]{%
}{
 \ottsym{(}  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \, \& \,  \ottsym{(}  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{3}}}}  \ottsym{)}   \ottsym{<:}   \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \, \& \,  \ottnt{A_{{\mathrm{3}}}}  \rulehl{ \rightsquigarrow   \mathsf{dist}_{\rightarrow} } }{%
{\ottdrulename{S\_distArr}}{}%
}}


\newcommand{\ottdruleSXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{A}   \ottsym{<:}   \ottnt{B}  \rulehl{ \rightsquigarrow   \ottnt{c} } }%
}{
 \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}   \ottsym{<:}   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}  \rulehl{ \rightsquigarrow   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{c}  \ottsym{\}} } }{%
{\ottdrulename{S\_rcd}}{}%
}}


\newcommand{\ottdruleSXXdistRcd}[1]{\ottdrule[#1]{%
}{
 \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  \, \& \,  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}   \ottsym{<:}   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \, \& \,  \ottnt{B}  \ottsym{\}}  \rulehl{ \rightsquigarrow    \mathsf{dist}_{ \{  \ottmv{l}  \} }  } }{%
{\ottdrulename{S\_distRcd}}{}%
}}

\newcommand{\ottdefnsub}[1]{\begin{ottdefnblock}[#1]{$ \ottnt{A}   \ottsym{<:}   \ottnt{B}  \rulehl{ \rightsquigarrow   \ottnt{c} } $}{\ottcom{Coercive subtyping}}
\ottusedrule{\ottdruleSXXrefl{}}
\ottusedrule{\ottdruleSXXtrans{}}
\ottusedrule{\ottdruleSXXtop{}}
\ottusedrule{\ottdruleSXXtopArr{}}
\ottusedrule{\ottdruleSXXtopRcd{}}
\ottusedrule{\ottdruleSXXarr{}}
\ottusedrule{\ottdruleSXXand{}}
\ottusedrule{\ottdruleSXXandl{}}
\ottusedrule{\ottdruleSXXandr{}}
\ottusedrule{\ottdruleSXXdistArr{}}
\ottusedrule{\ottdruleSXXrcd{}}
\ottusedrule{\ottdruleSXXdistRcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSubtyping}{
\ottdefnsub{}}

% defns JASubtype
%% defn ASub
\newcommand{\ottdruleAXXnat}[1]{\ottdrule[#1]{%
}{
 \ottsym{[]}   \vdash   \mathsf{Nat}  \prec :  \mathsf{Nat}   \rightsquigarrow   \mathsf{id} }{%
{\ottdrulename{A\_nat}}{}%
}}


\newcommand{\ottdruleAXXrcdNat}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{L}   \vdash   \ottnt{A}  \prec :  \mathsf{Nat}   \rightsquigarrow   \ottnt{c} }%
}{
 \ottsym{\{}  \ottmv{l}  \ottsym{\}}  \ottsym{,}  \mathcal{L}   \vdash   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  \prec :  \mathsf{Nat}   \rightsquigarrow   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{c}  \ottsym{\}} }{%
{\ottdrulename{A\_rcdNat}}{}%
}}


\newcommand{\ottdruleAXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{L}  \ottsym{,}  \ottsym{\{}  \ottmv{l}  \ottsym{\}}   \vdash   \ottnt{A}  \prec :  \ottnt{B}   \rightsquigarrow   \ottnt{c} }%
}{
 \mathcal{L}   \vdash   \ottnt{A}  \prec :  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}   \rightsquigarrow   \ottnt{c} }{%
{\ottdrulename{A\_rcd}}{}%
}}


\newcommand{\ottdruleAXXtop}[1]{\ottdrule[#1]{%
}{
 \mathcal{L}   \vdash   \ottnt{A}  \prec :  \top   \rightsquigarrow     \llbracket  \mathcal{L}  \rrbracket_{\top}   \circ  \mathsf{top}  }{%
{\ottdrulename{A\_top}}{}%
}}


\newcommand{\ottdruleAXXand}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{L}   \vdash   \ottnt{A}  \prec :  \ottnt{B_{{\mathrm{1}}}}   \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}} }%
\ottpremise{ \mathcal{L}   \vdash   \ottnt{A}  \prec :  \ottnt{B_{{\mathrm{2}}}}   \rightsquigarrow   \ottnt{c_{{\mathrm{2}}}} }%
}{
 \mathcal{L}   \vdash   \ottnt{A}  \prec :  \ottnt{B_{{\mathrm{1}}}}  \, \& \,  \ottnt{B_{{\mathrm{2}}}}   \rightsquigarrow     \llbracket  \mathcal{L}  \rrbracket_{\&}   \circ  \langle  \ottnt{c_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{c_{{\mathrm{2}}}}  \rangle  }{%
{\ottdrulename{A\_and}}{}%
}}


\newcommand{\ottdruleAXXarr}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{L}  \ottsym{,}  \ottnt{B_{{\mathrm{1}}}}   \vdash   \ottnt{A}  \prec :  \ottnt{B_{{\mathrm{2}}}}   \rightsquigarrow   \ottnt{c} }%
}{
 \mathcal{L}   \vdash   \ottnt{A}  \prec :  \ottnt{B_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}   \rightsquigarrow   \ottnt{c} }{%
{\ottdrulename{A\_arr}}{}%
}}


\newcommand{\ottdruleAXXandNOne}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{L}   \vdash   \ottnt{A_{{\mathrm{1}}}}  \prec :  \mathsf{Nat}   \rightsquigarrow   \ottnt{c} }%
}{
 \mathcal{L}   \vdash   \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \prec :  \mathsf{Nat}   \rightsquigarrow    \ottnt{c}  \circ  \pi_1  }{%
{\ottdrulename{A\_andN1}}{}%
}}


\newcommand{\ottdruleAXXandNTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \mathcal{L}   \vdash   \ottnt{A_{{\mathrm{2}}}}  \prec :  \mathsf{Nat}   \rightsquigarrow   \ottnt{c} }%
}{
 \mathcal{L}   \vdash   \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \prec :  \mathsf{Nat}   \rightsquigarrow    \ottnt{c}  \circ  \pi_2  }{%
{\ottdrulename{A\_andN2}}{}%
}}


\newcommand{\ottdruleAXXarrNat}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{[]}   \vdash   \ottnt{A}  \prec :  \ottnt{A_{{\mathrm{1}}}}   \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}} }%
\ottpremise{ \mathcal{L}   \vdash   \ottnt{A_{{\mathrm{2}}}}  \prec :  \mathsf{Nat}   \rightsquigarrow   \ottnt{c_{{\mathrm{2}}}} }%
}{
 \ottnt{A}  \ottsym{,}  \mathcal{L}   \vdash   \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \prec :  \mathsf{Nat}   \rightsquigarrow   \ottnt{c_{{\mathrm{1}}}}  \rightarrow  \ottnt{c_{{\mathrm{2}}}} }{%
{\ottdrulename{A\_arrNat}}{}%
}}

\newcommand{\ottdefnASub}[1]{\begin{ottdefnblock}[#1]{$ \mathcal{L}   \vdash   \ottnt{A}  \prec :  \ottnt{B}   \rightsquigarrow   \ottnt{c} $}{\ottcom{Algorithmic subtyping}}
\ottusedrule{\ottdruleAXXnat{}}
\ottusedrule{\ottdruleAXXrcdNat{}}
\ottusedrule{\ottdruleAXXrcd{}}
\ottusedrule{\ottdruleAXXtop{}}
\ottusedrule{\ottdruleAXXand{}}
\ottusedrule{\ottdruleAXXarr{}}
\ottusedrule{\ottdruleAXXandNOne{}}
\ottusedrule{\ottdruleAXXandNTwo{}}
\ottusedrule{\ottdruleAXXarrNat{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJASubtype}{
\ottdefnASub{}}

% defns Disjoint
%% defn disjoint
\newcommand{\ottdruleDXXtopL}[1]{\ottdrule[#1]{%
}{
\top  *  \ottnt{A}}{%
{\ottdrulename{D\_topL}}{}%
}}


\newcommand{\ottdruleDXXtopR}[1]{\ottdrule[#1]{%
}{
\ottnt{A}  *  \top}{%
{\ottdrulename{D\_topR}}{}%
}}


\newcommand{\ottdruleDXXarr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B_{{\mathrm{2}}}}}%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B_{{\mathrm{1}}}}  \rightarrow  \ottnt{B_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_arr}}{}%
}}


\newcommand{\ottdruleDXXandL}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{B}}%
\ottpremise{\ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B}}%
}{
\ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  *  \ottnt{B}}{%
{\ottdrulename{D\_andL}}{}%
}}


\newcommand{\ottdruleDXXandR}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  *  \ottnt{B_{{\mathrm{1}}}}}%
\ottpremise{\ottnt{A}  *  \ottnt{B_{{\mathrm{2}}}}}%
}{
\ottnt{A}  *  \ottnt{B_{{\mathrm{1}}}}  \, \& \,  \ottnt{B_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_andR}}{}%
}}


\newcommand{\ottdruleDXXrcdEq}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{A}  *  \ottnt{B}}%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  *  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}}{%
{\ottdrulename{D\_rcdEq}}{}%
}}


\newcommand{\ottdruleDXXrcdNeq}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{l_{{\mathrm{1}}}}  \neq  \ottmv{l_{{\mathrm{2}}}} }%
}{
\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  *  \ottsym{\{}  \ottmv{l_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{B}  \ottsym{\}}}{%
{\ottdrulename{D\_rcdNeq}}{}%
}}


\newcommand{\ottdruleDXXaxNatArr}[1]{\ottdrule[#1]{%
}{
\mathsf{Nat}  *  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_axNatArr}}{}%
}}


\newcommand{\ottdruleDXXaxArrNat}[1]{\ottdrule[#1]{%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  *  \mathsf{Nat}}{%
{\ottdrulename{D\_axArrNat}}{}%
}}


\newcommand{\ottdruleDXXaxNatRcd}[1]{\ottdrule[#1]{%
}{
\mathsf{Nat}  *  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}}{%
{\ottdrulename{D\_axNatRcd}}{}%
}}


\newcommand{\ottdruleDXXaxRcdNat}[1]{\ottdrule[#1]{%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  *  \mathsf{Nat}}{%
{\ottdrulename{D\_axRcdNat}}{}%
}}


\newcommand{\ottdruleDXXaxArrRcd}[1]{\ottdrule[#1]{%
}{
\ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  *  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}}{%
{\ottdrulename{D\_axArrRcd}}{}%
}}


\newcommand{\ottdruleDXXaxRcdArr}[1]{\ottdrule[#1]{%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  *  \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}}{%
{\ottdrulename{D\_axRcdArr}}{}%
}}

\newcommand{\ottdefndisjoint}[1]{\begin{ottdefnblock}[#1]{$\ottnt{A}  *  \ottnt{B}$}{\ottcom{Disjointness}}
\ottusedrule{\ottdruleDXXtopL{}}
\ottusedrule{\ottdruleDXXtopR{}}
\ottusedrule{\ottdruleDXXarr{}}
\ottusedrule{\ottdruleDXXandL{}}
\ottusedrule{\ottdruleDXXandR{}}
\ottusedrule{\ottdruleDXXrcdEq{}}
\ottusedrule{\ottdruleDXXrcdNeq{}}
\ottusedrule{\ottdruleDXXaxNatArr{}}
\ottusedrule{\ottdruleDXXaxArrNat{}}
\ottusedrule{\ottdruleDXXaxNatRcd{}}
\ottusedrule{\ottdruleDXXaxRcdNat{}}
\ottusedrule{\ottdruleDXXaxArrRcd{}}
\ottusedrule{\ottdruleDXXaxRcdArr{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsDisjoint}{
\ottdefndisjoint{}}

% defns JSTyping
%% defn has_type
\newcommand{\ottdruleTXXtop}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
 \Gamma   \vdash   \top   \Rightarrow   \top  \rulehl{ \rightsquigarrow   \langle \rangle } }{%
{\ottdrulename{T\_top}}{}%
}}


\newcommand{\ottdruleTXXlit}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
 \Gamma   \vdash   \ottmv{i}   \Rightarrow   \mathsf{Nat}  \rulehl{ \rightsquigarrow   \ottmv{i} } }{%
{\ottdrulename{T\_lit}}{}%
}}


\newcommand{\ottdruleTXXvar}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\ottmv{x}  \ottsym{:}  \ottnt{A} \, \in \, \Gamma}%
}{
 \Gamma   \vdash   \ottmv{x}   \Rightarrow   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottmv{x} } }{%
{\ottdrulename{T\_var}}{}%
}}


\newcommand{\ottdruleTXXapp}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   E_{{\mathrm{1}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e_{{\mathrm{1}}}} } }%
\ottpremise{ \Gamma   \vdash   E_{{\mathrm{2}}}   \Leftarrow   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{e_{{\mathrm{2}}}} } }%
}{
 \Gamma   \vdash   E_{{\mathrm{1}}} \, E_{{\mathrm{2}}}   \Rightarrow   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}} } }{%
{\ottdrulename{T\_app}}{}%
}}


\newcommand{\ottdruleTXXmerge}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   E_{{\mathrm{1}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{e_{{\mathrm{1}}}} } }%
\ottpremise{ \Gamma   \vdash   E_{{\mathrm{2}}}   \Rightarrow   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e_{{\mathrm{2}}}} } }%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{A_{{\mathrm{2}}}}}%
}{
 \Gamma   \vdash   E_{{\mathrm{1}}}  \,,,\,  E_{{\mathrm{2}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \langle  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \rangle } }{%
{\ottdrulename{T\_merge}}{}%
}}


\newcommand{\ottdruleTXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   E   \Rightarrow   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
}{
 \Gamma   \vdash   \ottsym{\{}  \ottmv{l}  \ottsym{=}  E  \ottsym{\}}   \Rightarrow   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  \rulehl{ \rightsquigarrow   \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}} } }{%
{\ottdrulename{T\_rcd}}{}%
}}


\newcommand{\ottdruleTXXproj}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   E   \Rightarrow   \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{A}  \ottsym{\}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
}{
 \Gamma   \vdash   E  \ottsym{.}  \ottmv{l}   \Rightarrow   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{e}  \ottsym{.}  \ottmv{l} } }{%
{\ottdrulename{T\_proj}}{}%
}}


\newcommand{\ottdruleTXXanno}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   E   \Leftarrow   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
}{
 \Gamma   \vdash   E  \ottsym{:}  \ottnt{A}   \Rightarrow   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{e} } }{%
{\ottdrulename{T\_anno}}{}%
}}


\newcommand{\ottdruleTXXabs}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A}   \vdash   E   \Leftarrow   \ottnt{B}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
}{
 \Gamma   \vdash    \lambda \ottmv{x} .\, E    \Leftarrow   \ottnt{A}  \rightarrow  \ottnt{B}  \rulehl{ \rightsquigarrow    \lambda \ottmv{x} .\, \ottnt{e}  } }{%
{\ottdrulename{T\_abs}}{}%
}}


\newcommand{\ottdruleTXXsub}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   E   \Rightarrow   \ottnt{B}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{ \ottnt{B}   \ottsym{<:}   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{c} } }%
}{
 \Gamma   \vdash   E   \Leftarrow   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{c} \, \ottnt{e} } }{%
{\ottdrulename{T\_sub}}{}%
}}

\newcommand{\ottdefnhasXXtype}[1]{\begin{ottdefnblock}[#1]{$ \Gamma   \vdash   E   \ottnt{dirflag}   \ottnt{A}  \rulehl{ \rightsquigarrow   \ottnt{e} } $}{\ottcom{Source bidirectional typechecking}}
\ottusedrule{\ottdruleTXXtop{}}
\ottusedrule{\ottdruleTXXlit{}}
\ottusedrule{\ottdruleTXXvar{}}
\ottusedrule{\ottdruleTXXapp{}}
\ottusedrule{\ottdruleTXXmerge{}}
\ottusedrule{\ottdruleTXXrcd{}}
\ottusedrule{\ottdruleTXXproj{}}
\ottusedrule{\ottdruleTXXanno{}}
\ottusedrule{\ottdruleTXXabs{}}
\ottusedrule{\ottdruleTXXsub{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJSTyping}{
\ottdefnhasXXtype{}}

% defns JCTyping
%% defn CTyp
\newcommand{\ottdruleCTypXXemptyOne}[1]{\ottdrule[#1]{%
}{
[\cdot]  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \rightsquigarrow  [\cdot]}{%
{\ottdrulename{CTyp\_empty1}}{}%
}}


\newcommand{\ottdruleCTypXXemptyTwo}[1]{\ottdrule[#1]{%
}{
[\cdot]  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \rightsquigarrow  [\cdot]}{%
{\ottdrulename{CTyp\_empty2}}{}%
}}


\newcommand{\ottdruleCTypXXappLOne}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{2}}}   \Leftarrow   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
}{
\mathcal{C} \, E_{{\mathrm{2}}}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D} \, \ottnt{e}}{%
{\ottdrulename{CTyp\_appL1}}{}%
}}


\newcommand{\ottdruleCTypXXappLTwo}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{2}}}   \Leftarrow   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
}{
\mathcal{C} \, E_{{\mathrm{2}}}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D} \, \ottnt{e}}{%
{\ottdrulename{CTyp\_appL2}}{}%
}}


\newcommand{\ottdruleCTypXXappROne}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{1}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Leftarrow \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
E_{{\mathrm{1}}} \, \mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \ottnt{e} \, \mathcal{D}}{%
{\ottdrulename{CTyp\_appR1}}{}%
}}


\newcommand{\ottdruleCTypXXappRTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{1}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Leftarrow \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
E_{{\mathrm{1}}} \, \mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \ottnt{e} \, \mathcal{D}}{%
{\ottdrulename{CTyp\_appR2}}{}%
}}


\newcommand{\ottdruleCTypXXmergeLOne}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{2}}}   \Rightarrow   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{A_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \,,,\,  E_{{\mathrm{2}}}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \langle  \mathcal{D}  \ottsym{,}  \ottnt{e}  \rangle}{%
{\ottdrulename{CTyp\_mergeL1}}{}%
}}


\newcommand{\ottdruleCTypXXmergeLTwo}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{2}}}   \Rightarrow   \ottnt{A_{{\mathrm{2}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{A_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \,,,\,  E_{{\mathrm{2}}}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \langle  \mathcal{D}  \ottsym{,}  \ottnt{e}  \rangle}{%
{\ottdrulename{CTyp\_mergeL2}}{}%
}}


\newcommand{\ottdruleCTypXXmergeROne}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{1}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{A_{{\mathrm{2}}}}}%
}{
E_{{\mathrm{1}}}  \,,,\,  \mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \langle  \ottnt{e}  \ottsym{,}  \mathcal{D}  \rangle}{%
{\ottdrulename{CTyp\_mergeR1}}{}%
}}


\newcommand{\ottdruleCTypXXmergeRTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma'   \vdash   E_{{\mathrm{1}}}   \Rightarrow   \ottnt{A_{{\mathrm{1}}}}  \rulehl{ \rightsquigarrow   \ottnt{e} } }%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{\ottnt{A_{{\mathrm{1}}}}  *  \ottnt{A_{{\mathrm{2}}}}}%
}{
E_{{\mathrm{1}}}  \,,,\,  \mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A_{{\mathrm{1}}}}  \, \& \,  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \langle  \ottnt{e}  \ottsym{,}  \mathcal{D}  \rangle}{%
{\ottdrulename{CTyp\_mergeR2}}{}%
}}


\newcommand{\ottdruleCTypXXrcdOne}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{B}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{=}  \mathcal{C}  \ottsym{\}}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}  \ottsym{)}  \rightsquigarrow  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \mathcal{D}  \ottsym{\}}}{%
{\ottdrulename{CTyp\_rcd1}}{}%
}}


\newcommand{\ottdruleCTypXXrcdTwo}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{B}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{=}  \mathcal{C}  \ottsym{\}}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}  \ottsym{)}  \rightsquigarrow  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \mathcal{D}  \ottsym{\}}}{%
{\ottdrulename{CTyp\_rcd2}}{}%
}}


\newcommand{\ottdruleCTypXXprojOne}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
\mathcal{C}  \ottsym{.}  \ottmv{l}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{B}  \ottsym{)}  \rightsquigarrow  \mathcal{D}  \ottsym{.}  \ottmv{l}}{%
{\ottdrulename{CTyp\_proj1}}{}%
}}


\newcommand{\ottdruleCTypXXprojTwo}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{B}  \ottsym{\}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
\mathcal{C}  \ottsym{.}  \ottmv{l}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{B}  \ottsym{)}  \rightsquigarrow  \mathcal{D}  \ottsym{.}  \ottmv{l}}{%
{\ottdrulename{CTyp\_proj2}}{}%
}}


\newcommand{\ottdruleCTypXXannoOne}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{B}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
\mathcal{C}  \ottsym{:}  \ottnt{A}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{B}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}{%
{\ottdrulename{CTyp\_anno1}}{}%
}}


\newcommand{\ottdruleCTypXXannoTwo}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{B}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
}{
\mathcal{C}  \ottsym{:}  \ottnt{A}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{B}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}{%
{\ottdrulename{CTyp\_anno2}}{}%
}}


\newcommand{\ottdruleCTypXXabsOne}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma'  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}} \, \Leftarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{ \ottmv{x}  \notin  \Gamma' }%
}{
 \lambda \ottmv{x} .\, \mathcal{C}   \ottsym{:}  \ottsym{(}  \Gamma \, \Rightarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Leftarrow \, \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow   \lambda \ottmv{x} .\, \mathcal{D} }{%
{\ottdrulename{CTyp\_abs1}}{}%
}}


\newcommand{\ottdruleCTypXXabsTwo}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma'  \ottsym{,}  \ottmv{x}  \ottsym{:}  \ottnt{A_{{\mathrm{1}}}} \, \Leftarrow \, \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow  \mathcal{D}}%
\ottpremise{ \ottmv{x}  \notin  \Gamma' }%
}{
 \lambda \ottmv{x} .\, \mathcal{C}   \ottsym{:}  \ottsym{(}  \Gamma \, \Leftarrow \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \Leftarrow \, \ottnt{A_{{\mathrm{1}}}}  \rightarrow  \ottnt{A_{{\mathrm{2}}}}  \ottsym{)}  \rightsquigarrow   \lambda \ottmv{x} .\, \mathcal{D} }{%
{\ottdrulename{CTyp\_abs2}}{}%
}}

\newcommand{\ottdefnCTyp}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{:}  \ottsym{(}  \Gamma \, \ottnt{dirflag_{{\mathrm{1}}}} \, \ottnt{A}  \ottsym{)}  \mapsto  \ottsym{(}  \Gamma' \, \ottnt{dirflag_{{\mathrm{2}}}} \, \ottnt{B}  \ottsym{)}  \rightsquigarrow  \mathcal{D}$}{\ottcom{context typing}}
\ottusedrule{\ottdruleCTypXXemptyOne{}}
\ottusedrule{\ottdruleCTypXXemptyTwo{}}
\ottusedrule{\ottdruleCTypXXappLOne{}}
\ottusedrule{\ottdruleCTypXXappLTwo{}}
\ottusedrule{\ottdruleCTypXXappROne{}}
\ottusedrule{\ottdruleCTypXXappRTwo{}}
\ottusedrule{\ottdruleCTypXXmergeLOne{}}
\ottusedrule{\ottdruleCTypXXmergeLTwo{}}
\ottusedrule{\ottdruleCTypXXmergeROne{}}
\ottusedrule{\ottdruleCTypXXmergeRTwo{}}
\ottusedrule{\ottdruleCTypXXrcdOne{}}
\ottusedrule{\ottdruleCTypXXrcdTwo{}}
\ottusedrule{\ottdruleCTypXXprojOne{}}
\ottusedrule{\ottdruleCTypXXprojTwo{}}
\ottusedrule{\ottdruleCTypXXannoOne{}}
\ottusedrule{\ottdruleCTypXXannoTwo{}}
\ottusedrule{\ottdruleCTypXXabsOne{}}
\ottusedrule{\ottdruleCTypXXabsTwo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJCTyping}{
\ottdefnCTyp{}}

% defns JCoTyping
%% defn cotyp
\newcommand{\ottdrulecotypXXrefl}[1]{\ottdrule[#1]{%
}{
\mathsf{id}  \vdash  \tau \, \triangleright \, \tau}{%
{\ottdrulename{cotyp\_refl}}{}%
}}


\newcommand{\ottdrulecotypXXtrans}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{c_{{\mathrm{1}}}}  \vdash  \tau_{{\mathrm{2}}} \, \triangleright \, \tau_{{\mathrm{3}}}}%
\ottpremise{\ottnt{c_{{\mathrm{2}}}}  \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{2}}}}%
}{
 \ottnt{c_{{\mathrm{1}}}}  \circ  \ottnt{c_{{\mathrm{2}}}}   \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{3}}}}{%
{\ottdrulename{cotyp\_trans}}{}%
}}


\newcommand{\ottdrulecotypXXtop}[1]{\ottdrule[#1]{%
}{
\mathsf{top}  \vdash  \tau \, \triangleright \, \langle \rangle}{%
{\ottdrulename{cotyp\_top}}{}%
}}


\newcommand{\ottdrulecotypXXtopArr}[1]{\ottdrule[#1]{%
}{
\mathsf{top}_{\rightarrow}  \vdash  \langle \rangle \, \triangleright \, \langle \rangle  \rightarrow  \langle \rangle}{%
{\ottdrulename{cotyp\_topArr}}{}%
}}


\newcommand{\ottdrulecotypXXarr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{c_{{\mathrm{1}}}}  \vdash  \tau'_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{1}}}}%
\ottpremise{\ottnt{c_{{\mathrm{2}}}}  \vdash  \tau_{{\mathrm{2}}} \, \triangleright \, \tau'_{{\mathrm{2}}}}%
}{
\ottnt{c_{{\mathrm{1}}}}  \rightarrow  \ottnt{c_{{\mathrm{2}}}}  \vdash  \tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{2}}} \, \triangleright \, \tau'_{{\mathrm{1}}}  \rightarrow  \tau'_{{\mathrm{2}}}}{%
{\ottdrulename{cotyp\_arr}}{}%
}}


\newcommand{\ottdrulecotypXXpair}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{c_{{\mathrm{1}}}}  \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{2}}}}%
\ottpremise{\ottnt{c_{{\mathrm{2}}}}  \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{3}}}}%
}{
\langle  \ottnt{c_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{c_{{\mathrm{2}}}}  \rangle  \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{2}}}  \times  \tau_{{\mathrm{3}}}}{%
{\ottdrulename{cotyp\_pair}}{}%
}}


\newcommand{\ottdrulecotypXXdistArr}[1]{\ottdrule[#1]{%
}{
\mathsf{dist}_{\rightarrow}  \vdash  \ottsym{(}  \tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{2}}}  \ottsym{)}  \times  \ottsym{(}  \tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{3}}}  \ottsym{)} \, \triangleright \, \tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{2}}}  \times  \tau_{{\mathrm{3}}}}{%
{\ottdrulename{cotyp\_distArr}}{}%
}}


\newcommand{\ottdrulecotypXXprojl}[1]{\ottdrule[#1]{%
}{
\pi_1  \vdash  \tau_{{\mathrm{1}}}  \times  \tau_{{\mathrm{2}}} \, \triangleright \, \tau_{{\mathrm{1}}}}{%
{\ottdrulename{cotyp\_projl}}{}%
}}


\newcommand{\ottdrulecotypXXprojr}[1]{\ottdrule[#1]{%
}{
\pi_2  \vdash  \tau_{{\mathrm{1}}}  \times  \tau_{{\mathrm{2}}} \, \triangleright \, \tau_{{\mathrm{2}}}}{%
{\ottdrulename{cotyp\_projr}}{}%
}}


\newcommand{\ottdrulecotypXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{c}  \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{2}}}}%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{c}  \ottsym{\}}  \vdash  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau_{{\mathrm{1}}}  \ottsym{\}} \, \triangleright \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau_{{\mathrm{2}}}  \ottsym{\}}}{%
{\ottdrulename{cotyp\_rcd}}{}%
}}


\newcommand{\ottdrulecotypXXtopRcd}[1]{\ottdrule[#1]{%
}{
 \mathsf{top}_{ \{  \ottmv{l}  \} }   \vdash  \langle \rangle \, \triangleright \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \langle \rangle  \ottsym{\}}}{%
{\ottdrulename{cotyp\_topRcd}}{}%
}}


\newcommand{\ottdrulecotypXXdistRcd}[1]{\ottdrule[#1]{%
}{
 \mathsf{dist}_{ \{  \ottmv{l}  \} }   \vdash  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau_{{\mathrm{1}}}  \ottsym{\}}  \times  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau_{{\mathrm{2}}}  \ottsym{\}} \, \triangleright \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau_{{\mathrm{1}}}  \times  \tau_{{\mathrm{2}}}  \ottsym{\}}}{%
{\ottdrulename{cotyp\_distRcd}}{}%
}}

\newcommand{\ottdefncotyp}[1]{\begin{ottdefnblock}[#1]{$\ottnt{c}  \vdash  \tau_{{\mathrm{1}}} \, \triangleright \, \tau_{{\mathrm{2}}}$}{\ottcom{Coercion typing}}
\ottusedrule{\ottdrulecotypXXrefl{}}
\ottusedrule{\ottdrulecotypXXtrans{}}
\ottusedrule{\ottdrulecotypXXtop{}}
\ottusedrule{\ottdrulecotypXXtopArr{}}
\ottusedrule{\ottdrulecotypXXarr{}}
\ottusedrule{\ottdrulecotypXXpair{}}
\ottusedrule{\ottdrulecotypXXdistArr{}}
\ottusedrule{\ottdrulecotypXXprojl{}}
\ottusedrule{\ottdrulecotypXXprojr{}}
\ottusedrule{\ottdrulecotypXXrcd{}}
\ottusedrule{\ottdrulecotypXXtopRcd{}}
\ottusedrule{\ottdrulecotypXXdistRcd{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJCoTyping}{
\ottdefncotyp{}}

% defns JTyping
%% defn typing
\newcommand{\ottdruletypXXunit}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\Delta  \vdash  \langle \rangle  \ottsym{:}  \langle \rangle}{%
{\ottdrulename{typ\_unit}}{}%
}}


\newcommand{\ottdruletypXXlit}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\Delta  \vdash  \ottmv{i}  \ottsym{:}  \mathsf{Nat}}{%
{\ottdrulename{typ\_lit}}{}%
}}


\newcommand{\ottdruletypXXvar}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\ottmv{x}  \ottsym{:}  \tau \, \in \, \Delta}%
}{
\Delta  \vdash  \ottmv{x}  \ottsym{:}  \tau}{%
{\ottdrulename{typ\_var}}{}%
}}


\newcommand{\ottdruletypXXabs}[1]{\ottdrule[#1]{%
\ottpremise{\Delta  \ottsym{,}  \ottmv{x}  \ottsym{:}  \tau_{{\mathrm{1}}}  \vdash  \ottnt{e}  \ottsym{:}  \tau_{{\mathrm{2}}}}%
}{
\Delta  \vdash   \lambda \ottmv{x} .\, \ottnt{e}   \ottsym{:}  \tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{typ\_abs}}{}%
}}


\newcommand{\ottdruletypXXapp}[1]{\ottdrule[#1]{%
\ottpremise{\Delta  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \tau_{{\mathrm{1}}}  \rightarrow  \tau_{{\mathrm{2}}}}%
\ottpremise{\Delta  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau_{{\mathrm{1}}}}%
}{
\Delta  \vdash  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{typ\_app}}{}%
}}


\newcommand{\ottdruletypXXpair}[1]{\ottdrule[#1]{%
\ottpremise{\Delta  \vdash  \ottnt{e_{{\mathrm{1}}}}  \ottsym{:}  \tau_{{\mathrm{1}}}}%
\ottpremise{\Delta  \vdash  \ottnt{e_{{\mathrm{2}}}}  \ottsym{:}  \tau_{{\mathrm{2}}}}%
}{
\Delta  \vdash  \langle  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \rangle  \ottsym{:}  \tau_{{\mathrm{1}}}  \times  \tau_{{\mathrm{2}}}}{%
{\ottdrulename{typ\_pair}}{}%
}}


\newcommand{\ottdruletypXXcapp}[1]{\ottdrule[#1]{%
\ottpremise{\Delta  \vdash  \ottnt{e}  \ottsym{:}  \tau}%
\ottpremise{\ottnt{c}  \vdash  \tau \, \triangleright \, \tau'}%
}{
\Delta  \vdash  \ottnt{c} \, \ottnt{e}  \ottsym{:}  \tau'}{%
{\ottdrulename{typ\_capp}}{}%
}}


\newcommand{\ottdruletypXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{\Delta  \vdash  \ottnt{e}  \ottsym{:}  \tau}%
}{
\Delta  \vdash  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}}  \ottsym{:}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau  \ottsym{\}}}{%
{\ottdrulename{typ\_rcd}}{}%
}}


\newcommand{\ottdruletypXXproj}[1]{\ottdrule[#1]{%
\ottpremise{\Delta  \vdash  \ottnt{e}  \ottsym{:}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \tau  \ottsym{\}}}%
}{
\Delta  \vdash  \ottnt{e}  \ottsym{.}  \ottmv{l}  \ottsym{:}  \tau}{%
{\ottdrulename{typ\_proj}}{}%
}}

\newcommand{\ottdefntyping}[1]{\begin{ottdefnblock}[#1]{$\Delta  \vdash  \ottnt{e}  \ottsym{:}  \tau$}{\ottcom{Typing rules}}
\ottusedrule{\ottdruletypXXunit{}}
\ottusedrule{\ottdruletypXXlit{}}
\ottusedrule{\ottdruletypXXvar{}}
\ottusedrule{\ottdruletypXXabs{}}
\ottusedrule{\ottdruletypXXapp{}}
\ottusedrule{\ottdruletypXXpair{}}
\ottusedrule{\ottdruletypXXcapp{}}
\ottusedrule{\ottdruletypXXrcd{}}
\ottusedrule{\ottdruletypXXproj{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJTyping}{
\ottdefntyping{}}

% defns JValue
%% defn value
\newcommand{\ottdrulevalueXXunit}[1]{\ottdrule[#1]{%
}{
  }{%
{\ottdrulename{value\_unit}}{}%
}}


\newcommand{\ottdrulevalueXXlit}[1]{\ottdrule[#1]{%
}{
  }{%
{\ottdrulename{value\_lit}}{}%
}}


\newcommand{\ottdrulevalueXXabs}[1]{\ottdrule[#1]{%
}{
  }{%
{\ottdrulename{value\_abs}}{}%
}}


\newcommand{\ottdrulevalueXXpair}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{  }%
}{
  }{%
{\ottdrulename{value\_pair}}{}%
}}


\newcommand{\ottdrulevalueXXrcd}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
  }{%
{\ottdrulename{value\_rcd}}{}%
}}


\newcommand{\ottdrulevalueXXcabs}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
  }{%
{\ottdrulename{value\_cabs}}{}%
}}


\newcommand{\ottdrulevalueXXcpair}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
  }{%
{\ottdrulename{value\_cpair}}{}%
}}


\newcommand{\ottdrulevalueXXtopArr}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
  }{%
{\ottdrulename{value\_topArr}}{}%
}}

\newcommand{\ottdefnvalue}[1]{\begin{ottdefnblock}[#1]{$  $}{\ottcom{Values}}
\ottusedrule{\ottdrulevalueXXunit{}}
\ottusedrule{\ottdrulevalueXXlit{}}
\ottusedrule{\ottdrulevalueXXabs{}}
\ottusedrule{\ottdrulevalueXXpair{}}
\ottusedrule{\ottdrulevalueXXrcd{}}
\ottusedrule{\ottdrulevalueXXcabs{}}
\ottusedrule{\ottdrulevalueXXcpair{}}
\ottusedrule{\ottdrulevalueXXtopArr{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJValue}{
\ottdefnvalue{}}

% defns JEval
%% defn step
\newcommand{\ottdrulestepXXid}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\mathsf{id} \, \ottnt{v}  \longrightarrow  \ottnt{v}}{%
{\ottdrulename{step\_id}}{}%
}}


\newcommand{\ottdrulestepXXtrans}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\ottsym{(}   \ottnt{c_{{\mathrm{1}}}}  \circ  \ottnt{c_{{\mathrm{2}}}}   \ottsym{)} \, \ottnt{v}  \longrightarrow  \ottnt{c_{{\mathrm{1}}}} \, \ottsym{(}  \ottnt{c_{{\mathrm{2}}}} \, \ottnt{v}  \ottsym{)}}{%
{\ottdrulename{step\_trans}}{}%
}}


\newcommand{\ottdrulestepXXtop}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\mathsf{top} \, \ottnt{v}  \longrightarrow  \langle \rangle}{%
{\ottdrulename{step\_top}}{}%
}}


\newcommand{\ottdrulestepXXtopArr}[1]{\ottdrule[#1]{%
}{
\ottsym{(}  \mathsf{top}_{\rightarrow} \, \langle \rangle  \ottsym{)} \, \langle \rangle  \longrightarrow  \langle \rangle}{%
{\ottdrulename{step\_topArr}}{}%
}}


\newcommand{\ottdrulestepXXarr}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{  }%
}{
\ottsym{(}  \ottsym{(}  \ottnt{c_{{\mathrm{1}}}}  \rightarrow  \ottnt{c_{{\mathrm{2}}}}  \ottsym{)} \, \ottnt{v_{{\mathrm{1}}}}  \ottsym{)} \, \ottnt{v_{{\mathrm{2}}}}  \longrightarrow  \ottnt{c_{{\mathrm{2}}}} \, \ottsym{(}  \ottnt{v_{{\mathrm{1}}}} \, \ottsym{(}  \ottnt{c_{{\mathrm{1}}}} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{)}}{%
{\ottdrulename{step\_arr}}{}%
}}


\newcommand{\ottdrulestepXXpair}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\langle  \ottnt{c_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{c_{{\mathrm{2}}}}  \rangle \, \ottnt{v}  \longrightarrow  \langle  \ottnt{c_{{\mathrm{1}}}} \, \ottnt{v}  \ottsym{,}  \ottnt{c_{{\mathrm{2}}}} \, \ottnt{v}  \rangle}{%
{\ottdrulename{step\_pair}}{}%
}}


\newcommand{\ottdrulestepXXdistArr}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{  }%
\ottpremise{  }%
}{
\ottsym{(}  \mathsf{dist}_{\rightarrow} \, \langle  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{v_{{\mathrm{2}}}}  \rangle  \ottsym{)} \, \ottnt{v_{{\mathrm{3}}}}  \longrightarrow  \langle  \ottnt{v_{{\mathrm{1}}}} \, \ottnt{v_{{\mathrm{3}}}}  \ottsym{,}  \ottnt{v_{{\mathrm{2}}}} \, \ottnt{v_{{\mathrm{3}}}}  \rangle}{%
{\ottdrulename{step\_distArr}}{}%
}}


\newcommand{\ottdrulestepXXprojl}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{  }%
}{
\pi_1 \, \langle  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{v_{{\mathrm{2}}}}  \rangle  \longrightarrow  \ottnt{v_{{\mathrm{1}}}}}{%
{\ottdrulename{step\_projl}}{}%
}}


\newcommand{\ottdrulestepXXprojr}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{  }%
}{
\pi_2 \, \langle  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{v_{{\mathrm{2}}}}  \rangle  \longrightarrow  \ottnt{v_{{\mathrm{2}}}}}{%
{\ottdrulename{step\_projr}}{}%
}}


\newcommand{\ottdrulestepXXcrcd}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{c}  \ottsym{\}} \, \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{v}  \ottsym{\}}  \longrightarrow  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{c} \, \ottnt{v}  \ottsym{\}}}{%
{\ottdrulename{step\_crcd}}{}%
}}


\newcommand{\ottdrulestepXXtopRcd}[1]{\ottdrule[#1]{%
}{
 \mathsf{top}_{ \{  \ottmv{l}  \} }  \, \langle \rangle  \longrightarrow  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \langle \rangle  \ottsym{\}}}{%
{\ottdrulename{step\_topRcd}}{}%
}}


\newcommand{\ottdrulestepXXdistRcd}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{  }%
}{
 \mathsf{dist}_{ \{  \ottmv{l}  \} }  \, \langle  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{\}}  \ottsym{,}  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{v_{{\mathrm{2}}}}  \ottsym{\}}  \rangle  \longrightarrow  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \langle  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{v_{{\mathrm{2}}}}  \rangle  \ottsym{\}}}{%
{\ottdrulename{step\_distRcd}}{}%
}}


\newcommand{\ottdrulestepXXprojRcd}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{v}  \ottsym{\}}  \ottsym{.}  \ottmv{l}  \longrightarrow  \ottnt{v}}{%
{\ottdrulename{step\_projRcd}}{}%
}}


\newcommand{\ottdrulestepXXbeta}[1]{\ottdrule[#1]{%
\ottpremise{  }%
}{
\ottsym{(}   \lambda \ottmv{x} .\, \ottnt{e}   \ottsym{)} \, \ottnt{v}  \longrightarrow  \ottnt{e}  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{v}  \ottsym{]}}{%
{\ottdrulename{step\_beta}}{}%
}}


\newcommand{\ottdrulestepXXappOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{1}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}}%
}{
\ottnt{e_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}}{%
{\ottdrulename{step\_app1}}{}%
}}


\newcommand{\ottdrulestepXXappTwo}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{2}}}}}%
}{
\ottnt{v_{{\mathrm{1}}}} \, \ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{v_{{\mathrm{1}}}} \, \ottnt{e'_{{\mathrm{2}}}}}{%
{\ottdrulename{step\_app2}}{}%
}}


\newcommand{\ottdrulestepXXpairOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e_{{\mathrm{1}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{1}}}}}%
}{
\langle  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \rangle  \longrightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \rangle}{%
{\ottdrulename{step\_pair1}}{}%
}}


\newcommand{\ottdrulestepXXpairTwo}[1]{\ottdrule[#1]{%
\ottpremise{  }%
\ottpremise{\ottnt{e_{{\mathrm{2}}}}  \longrightarrow  \ottnt{e'_{{\mathrm{2}}}}}%
}{
\langle  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \rangle  \longrightarrow  \langle  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e'_{{\mathrm{2}}}}  \rangle}{%
{\ottdrulename{step\_pair2}}{}%
}}


\newcommand{\ottdrulestepXXcapp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e}  \longrightarrow  \ottnt{e'}}%
}{
\ottnt{c} \, \ottnt{e}  \longrightarrow  \ottnt{c} \, \ottnt{e'}}{%
{\ottdrulename{step\_capp}}{}%
}}


\newcommand{\ottdrulestepXXrcdOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e}  \longrightarrow  \ottnt{e'}}%
}{
\ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e}  \ottsym{\}}  \longrightarrow  \ottsym{\{}  \ottmv{l}  \ottsym{=}  \ottnt{e'}  \ottsym{\}}}{%
{\ottdrulename{step\_rcd1}}{}%
}}


\newcommand{\ottdrulestepXXrcdTwo}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e}  \longrightarrow  \ottnt{e'}}%
}{
\ottnt{e}  \ottsym{.}  \ottmv{l}  \longrightarrow  \ottnt{e'}  \ottsym{.}  \ottmv{l}}{%
{\ottdrulename{step\_rcd2}}{}%
}}

\newcommand{\ottdefnstep}[1]{\begin{ottdefnblock}[#1]{$\ottnt{e}  \longrightarrow  \ottnt{e'}$}{\ottcom{Operational semantics}}
\ottusedrule{\ottdrulestepXXid{}}
\ottusedrule{\ottdrulestepXXtrans{}}
\ottusedrule{\ottdrulestepXXtop{}}
\ottusedrule{\ottdrulestepXXtopArr{}}
\ottusedrule{\ottdrulestepXXarr{}}
\ottusedrule{\ottdrulestepXXpair{}}
\ottusedrule{\ottdrulestepXXdistArr{}}
\ottusedrule{\ottdrulestepXXprojl{}}
\ottusedrule{\ottdrulestepXXprojr{}}
\ottusedrule{\ottdrulestepXXcrcd{}}
\ottusedrule{\ottdrulestepXXtopRcd{}}
\ottusedrule{\ottdrulestepXXdistRcd{}}
\ottusedrule{\ottdrulestepXXprojRcd{}}
\ottusedrule{\ottdrulestepXXbeta{}}
\ottusedrule{\ottdrulestepXXappOne{}}
\ottusedrule{\ottdrulestepXXappTwo{}}
\ottusedrule{\ottdrulestepXXpairOne{}}
\ottusedrule{\ottdrulestepXXpairTwo{}}
\ottusedrule{\ottdrulestepXXcapp{}}
\ottusedrule{\ottdrulestepXXrcdOne{}}
\ottusedrule{\ottdrulestepXXrcdTwo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJEval}{
\ottdefnstep{}}

\newcommand{\ottdefnss}{
\ottdefnsJSubtyping
\ottdefnsJASubtype
\ottdefnsDisjoint
\ottdefnsJSTyping
\ottdefnsJCTyping
\ottdefnsJCoTyping
\ottdefnsJTyping
\ottdefnsJValue
\ottdefnsJEval
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

